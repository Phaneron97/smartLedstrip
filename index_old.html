<!DOCTYPE html>
<html>
<head>
	<title>LEDstrip Control</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		$(document).ready(function() {
			$("#red-custom-form").submit(function(event) {
				event.preventDefault();

				var steps = [];

				$("#red-custom-steps tr").each(function() {
					var duration = parseInt($(this).find(".duration").val());
					var dutyCycle = parseFloat($(this).find(".duty-cycle").val());

					steps.push({"duration": duration, "dutyCycle": dutyCycle});
				});

				$.post("/red", {"effect": "custom", "steps": JSON.stringify(steps)});
			});
		});

		function addStep() {
			$("#red-custom-steps").append("<tr><td><input type='number' class='duration' min='0' step='1' required></td><td><input type='number' class='duty-cycle' min='0' max='100' step='0.1' required></td></tr>");
		}
	</script>

    <style>
        hr  
        {  
            width: 100%;  
            color: black;
            /* margin-bottom: 7px;  
            margin-right: auto;  
            margin-left: auto;  
            margin-top: 9px;   */
        }  
    </style>
</head>
<body>
	<h1>LEDstrip Control</h1>
    <!-- RED -->
	<h2>Red</h2>
	<select id="red-select">
		<option value="off">Off</option>
		<option value="solid">Solid</option>
		<option value="blink">Blink</option>
		<option value="fade">Fade</option>
		<option value="custom">Custom</option>
	</select>

	<form id="red-custom-form" >
		<table id="red-custom-steps">
			<tr>
				<th>Duration (ms)</th>
				<th>Duty Cycle (%)</th>
			</tr>
			<tr>
				<td><input type="number" class="duration" min="0" step="1" required></td>
				<td><input type="number" class="duty-cycle" min="0" max="100" step="0.1" required></td>
			</tr>
		</table>
		<button type="submit">Save</button>
	</form>
    <hr>

    <!-- GREEN -->
	<h2>Green</h2>
	<select id="green-select">
		<option value="off">Off</option>
		<option value="solid">Solid</option>
		<option value="blink">Blink</option>
		<option value="fade">Fade</option>
		<option value="custom">Custom</option>
	</select>

	<form id="green-custom-form" >
		<table id="green-custom-steps">
			<tr>
				<th>Duration (ms)</th>
				<th>Duty Cycle (%)</th>
			</tr>
			<tr>
				<td><input type="number" class="duration" min="0" step="1" required></td>
				<td><input type="number" class="duty-cycle" min="0" max="100" step="0.1" required></td>
			</tr>
		</table>
		<button type="submit">Save</button>
	</form>
    
	<button onclick="addStep()">Add Step</button>
    <hr>
    <!-- BLUE -->

    <h2>Blue</h2>
	<select id="blue-select">
		<option value="off">Off</option>
		<option value="solid">Solid</option>
		<option value="blink">Blink</option>
		<option value="fade">Fade</option>
		<option value="custom">Custom</option>
	</select>

	<form id="blue-custom-form" >
		<table id="blue-custom-steps">
			<tr>
				<th>Duration (ms)</th>
				<th>Duty Cycle (%)</th>
			</tr>
			<tr>
				<td><input type="number" class="duration" min="0" step="1" required></td>
				<td><input type="number" class="duty-cycle" min="0" max="100" step="0.1" required></td>
			</tr>
		</table>
		<button type="submit">Save</button>
	</form>
    
	<button onclick="addStep()">Add Step</button>


</body>
</html>
