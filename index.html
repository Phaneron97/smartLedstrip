
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/json">
  </head>
  <body>
    <h1>Ledstrip</h1>
    <h2>Red</h2>
    <button id="RedOnButton" name="RedOnButton">ON</button>
    <button id="RedOffButton" name="RedOffButton">OFF</button><br>
    <button id="RedPulseOnButton" name="RedPulseOnButton">Pulse ON</button>
    <button id="RedPulseOffButton" name="RedPulseOffButton">Pulse OFF</button><br>
    <button id="RedFadeOutOnButton" name="RedFadeOutOnButton">Fade out ON</button>
    <button id="RedFadeOutOffButton" name="RedFadeOutOffButton">Fade out OFF</button><br>
    <button id="RedFadeInOnButton" name="RedFadeInOnButton">Fade in ON</button>
    <button id="RedFadeInOffButton" name="RedFadeInOffButton">Fade in OFF</button><br>

    <h2>Green</h2>
    <button id="GreenOnButton" name="GreenOnButton">ON</button>
    <button id="GreenOffButton" name="GreenOffButton">OFF</button><br>
    <button id="GreenPulseOnButton" name="GreenPulseOnButton">Pulse ON</button>
    <button id="GreenPulseOffButton" name="GreenPulseOffButton">Pulse OFF</button><br>
    <button id="GreenFadeOutOnButton" name="GreenFadeOutOnButton">Fade out ON</button>
    <button id="GreenFadeOutOffButton" name="GreenFadeOutOffButton">Fade out OFF</button><br>
    <button id="GreenFadeInOnButton" name="GreenFadeInOnButton">Fade in ON</button>
    <button id="GreenFadeInOffButton" name="GreenFadeInOffButton">Fade in OFF</button><br>

    <h2>Blue</h2>
    <button id="BlueOnButton" name="BlueOnButton">ON</button>
    <button id="BlueOffButton" name="BlueOffButton">OFF</button><br>
    <button id="BluePulseOnButton" name="BluePulseOnButton">Pulse ON</button>
    <button id="BluePulseOffButton" name="BluePulseOffButton">Pulse OFF</button><br>
    <button id="BlueFadeOutOnButton" name="BlueFadeOutOnButton">Fade out ON</button>
    <button id="BlueFadeOutOffButton" name="BlueFadeOutOffButton">Fade out OFF</button><br>
    <button id="BlueFadeInOnButton" name="BlueFadeInOnButton">Fade in ON</button>
    <button id="BlueFadeInOffButton" name="BlueFadeInOffButton">Fade in OFF</button><br>


    <h2>Premade effects</h2>
    <button id="Fireplace" name="Fireplace">Fireplace</button><br>

    <p>GPIO 12: <span id="gpio12"></span></p> 

    <!-- <form action="/submit" method="GET">
        <label for="name">Name:</label>
        <input type="text" name="name" id="name">
        <label for="email">Email:</label>
        <input type="email" name="email" id="email">
        <button type="submit">Submit</button>
    </form> -->
    

    <script>
      var RedOnButton = document.getElementById('RedOnButton');
      var RedOffButton = document.getElementById('RedOffButton');

      var GreenOnButton = document.getElementById('GreenOnButton');
      var GreenOffButton = document.getElementById('GreenOffButton');

      var BlueOnButton = document.getElementById('BlueOnButton');
      var BlueOffButton = document.getElementById('BlueOffButton');

      // Load data from JSON file
      function fetchJSON() {
        const url = `gpio_states.json`;
        fetch(url)
        .then(response => response.json())
        .then(data => {
          // Update webpage with GPIO state data
          document.getElementById('gpio12').innerText = data.gpio12;
        });
      }

      // function sendRequest(pin, state) {

      // }
      
      // RedOnButton.addEventListener('click', function() {
      //   var xhr = new XMLHttpRequest();
      //   xhr.open('GET', '/gpio?pin=12&state=1', true);
      //   xhr.send();
      //   fetchJSON();
      //   setInterval(fetchJSON, 500);
      // });

      // RedOffButton.addEventListener('click', function() {
      //   var xhr = new XMLHttpRequest();
      //   xhr.open('GET', '/gpio?pin=12&state=0', true);
      //   xhr.send();

      //   fetchJSON();
      //   setInterval(fetchJSON, 500);
      // });

      // GreenOnButton.addEventListener('click', function() {
      //   var xhr = new XMLHttpRequest();
      //   xhr.open('GET', '/gpio?pin=13&state=1', true);
      //   xhr.send();
      //   fetchJSON();
      //   setInterval(fetchJSON, 500);
      // });

      // GreenOffButton.addEventListener('click', function() {
      //   var xhr = new XMLHttpRequest();
      //   xhr.open('GET', '/gpio?pin=13&state=0', true);
      //   xhr.send();

      //   fetchJSON();
      //   setInterval(fetchJSON, 500);
      // });

      // BlueOnButton.addEventListener('click', function() {
      //   var xhr = new XMLHttpRequest();
      //   xhr.open('GET', '/gpio?pin=18&state=1', true);
      //   xhr.send();
      //   fetchJSON();
      //   setInterval(fetchJSON, 500);
      // });

      // BlueOffButton.addEventListener('click', function() {
      //   var xhr = new XMLHttpRequest();
      //   xhr.open('GET', '/gpio?pin=18&state=0', true);
      //   xhr.send();

      //   fetchJSON();
      //   setInterval(fetchJSON, 500);
      // });

      function sendCommand(pin, state) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', `/gpio?pin=${pin}&state=${state}`, true);
        xhr.send();
        fetchJSON();
        setInterval(fetchJSON, 500);
      }

      RedOnButton.addEventListener('click', () => sendCommand(12, 1));
      RedOffButton.addEventListener('click', () => sendCommand(12, 0));
      GreenOnButton.addEventListener('click', () => sendCommand(13, 1));
      GreenOffButton.addEventListener('click', () => sendCommand(13, 0));
      BlueOnButton.addEventListener('click', () => sendCommand(18, 1));
      BlueOffButton.addEventListener('click', () => sendCommand(18, 0));
  </script>

<!-- <script>
  // Load data from JSON file
      // Fetch the JSON data from the file

</script> -->
  </body>
</html>